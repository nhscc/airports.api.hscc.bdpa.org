"use strict";

var _bundleAnalyzer = _interopRequireDefault(require("@next/bundle-analyzer"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('./src/dev-utils').populateEnv();

const paths = {
  universe: `${__dirname}/src/`,
  multiverse: `${__dirname}/lib/`
};

module.exports = () => {
  return (0, _bundleAnalyzer.default)({
    enabled: process.env.ANALYZE === 'true'
  })({
    distDir: 'build',
    webpack: config => {
      config.resolve && (config.resolve.alias = { ...config.resolve.alias,
        universe: paths.universe,
        multiverse: paths.multiverse
      });
      return config;
    },
    env: {
      FLIGHTS_GENERATE_DAYS: process.env.FLIGHTS_GENERATE_DAYS,
      AIRPORT_NUM_OF_GATE_LETTERS: process.env.AIRPORT_NUM_OF_GATE_LETTERS,
      AIRPORT_GATE_NUMBERS_PER_LETTER: process.env.AIRPORT_GATE_NUMBERS_PER_LETTER,
      RESULTS_PER_PAGE: process.env.RESULTS_PER_PAGE,
      IGNORE_RATE_LIMITS: process.env.IGNORE_RATE_LIMITS,
      LOCKOUT_ALL_KEYS: process.env.LOCKOUT_ALL_KEYS,
      DISALLOWED_METHODS: process.env.DISALLOWED_METHODS,
      REQUESTS_PER_CONTRIVED_ERROR: process.env.REQUESTS_PER_CONTRIVED_ERROR,
      MAX_CONTENT_LENGTH_BYTES: process.env.MAX_CONTENT_LENGTH_BYTES
    },

    async rewrites() {
      return [{
        source: '/v1/flights/all',
        destination: '/api/v1/flights/all'
      }, {
        source: '/v1/flights/search',
        destination: '/api/v1/flights/search'
      }, {
        source: '/v1/flights/with-ids',
        destination: '/api/v1/flights/with-ids'
      }, {
        source: '/v1/info/airlines',
        destination: '/api/v1/info/airlines'
      }, {
        source: '/v1/info/airports',
        destination: '/api/v1/info/airports'
      }, {
        source: '/v1/info/no-fly-list',
        destination: '/api/v1/info/no-fly-list'
      }, {
        source: '/v2/flights',
        destination: '/api/v2/flights'
      }, {
        source: '/v2/info/airlines',
        destination: '/api/v2/info/airlines'
      }, {
        source: '/v2/info/airports',
        destination: '/api/v2/info/airports'
      }, {
        source: '/v2/info/all-extras',
        destination: '/api/v2/info/all-extras'
      }, {
        source: '/v2/info/no-fly-list',
        destination: '/api/v2/info/no-fly-list'
      }, {
        source: '/v2/info/seat-classes',
        destination: '/api/v2/info/seat-classes'
      }];
    }

  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy9uZXh0LmNvbmZpZy50cyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwicG9wdWxhdGVFbnYiLCJwYXRocyIsInVuaXZlcnNlIiwiX19kaXJuYW1lIiwibXVsdGl2ZXJzZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbmFibGVkIiwicHJvY2VzcyIsImVudiIsIkFOQUxZWkUiLCJkaXN0RGlyIiwid2VicGFjayIsImNvbmZpZyIsInJlc29sdmUiLCJhbGlhcyIsIkZMSUdIVFNfR0VORVJBVEVfREFZUyIsIkFJUlBPUlRfTlVNX09GX0dBVEVfTEVUVEVSUyIsIkFJUlBPUlRfR0FURV9OVU1CRVJTX1BFUl9MRVRURVIiLCJSRVNVTFRTX1BFUl9QQUdFIiwiSUdOT1JFX1JBVEVfTElNSVRTIiwiTE9DS09VVF9BTExfS0VZUyIsIkRJU0FMTE9XRURfTUVUSE9EUyIsIlJFUVVFU1RTX1BFUl9DT05UUklWRURfRVJST1IiLCJNQVhfQ09OVEVOVF9MRU5HVEhfQllURVMiLCJyZXdyaXRlcyIsInNvdXJjZSIsImRlc3RpbmF0aW9uIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBT0FBLE9BQU8sQ0FBQyxpQkFBRCxDQUFQLENBQTJCQyxXQUEzQjs7QUFFQSxNQUFNQyxLQUFLLEdBQUc7QUFDVkMsRUFBQUEsUUFBUSxFQUFHLEdBQUVDLFNBQVUsT0FEYjtBQUVWQyxFQUFBQSxVQUFVLEVBQUcsR0FBRUQsU0FBVTtBQUZmLENBQWQ7O0FBTUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixNQUFNO0FBQ25CLFNBQU8sNkJBQW1CO0FBQ3RCQyxJQUFBQSxPQUFPLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxPQUFaLEtBQXdCO0FBRFgsR0FBbkIsRUFFSjtBQUVDQyxJQUFBQSxPQUFPLEVBQUUsT0FGVjtBQU9DQyxJQUFBQSxPQUFPLEVBQUdDLE1BQUQsSUFBMkI7QUFJaENBLE1BQUFBLE1BQU0sQ0FBQ0MsT0FBUCxLQUFtQkQsTUFBTSxDQUFDQyxPQUFQLENBQWVDLEtBQWYsR0FBdUIsRUFDdEMsR0FBR0YsTUFBTSxDQUFDQyxPQUFQLENBQWVDLEtBRG9CO0FBRXRDYixRQUFBQSxRQUFRLEVBQUVELEtBQUssQ0FBQ0MsUUFGc0I7QUFHdENFLFFBQUFBLFVBQVUsRUFBRUgsS0FBSyxDQUFDRztBQUhvQixPQUExQztBQU9BLGFBQU9TLE1BQVA7QUFDSCxLQW5CRjtBQXdCQ0osSUFBQUEsR0FBRyxFQUFFO0FBQ0RPLE1BQUFBLHFCQUFxQixFQUFFUixPQUFPLENBQUNDLEdBQVIsQ0FBWU8scUJBRGxDO0FBRURDLE1BQUFBLDJCQUEyQixFQUFFVCxPQUFPLENBQUNDLEdBQVIsQ0FBWVEsMkJBRnhDO0FBR0RDLE1BQUFBLCtCQUErQixFQUFFVixPQUFPLENBQUNDLEdBQVIsQ0FBWVMsK0JBSDVDO0FBSURDLE1BQUFBLGdCQUFnQixFQUFFWCxPQUFPLENBQUNDLEdBQVIsQ0FBWVUsZ0JBSjdCO0FBS0RDLE1BQUFBLGtCQUFrQixFQUFFWixPQUFPLENBQUNDLEdBQVIsQ0FBWVcsa0JBTC9CO0FBTURDLE1BQUFBLGdCQUFnQixFQUFFYixPQUFPLENBQUNDLEdBQVIsQ0FBWVksZ0JBTjdCO0FBT0RDLE1BQUFBLGtCQUFrQixFQUFFZCxPQUFPLENBQUNDLEdBQVIsQ0FBWWEsa0JBUC9CO0FBUURDLE1BQUFBLDRCQUE0QixFQUFFZixPQUFPLENBQUNDLEdBQVIsQ0FBWWMsNEJBUnpDO0FBU0RDLE1BQUFBLHdCQUF3QixFQUFFaEIsT0FBTyxDQUFDQyxHQUFSLENBQVllO0FBVHJDLEtBeEJOOztBQW9DQyxVQUFNQyxRQUFOLEdBQWlCO0FBQ2IsYUFBTyxDQUNIO0FBQ0lDLFFBQUFBLE1BQU0sRUFBRSxpQkFEWjtBQUVJQyxRQUFBQSxXQUFXLEVBQUU7QUFGakIsT0FERyxFQUtIO0FBQ0lELFFBQUFBLE1BQU0sRUFBRSxvQkFEWjtBQUVJQyxRQUFBQSxXQUFXLEVBQUU7QUFGakIsT0FMRyxFQVNIO0FBQ0lELFFBQUFBLE1BQU0sRUFBRSxzQkFEWjtBQUVJQyxRQUFBQSxXQUFXLEVBQUU7QUFGakIsT0FURyxFQWFIO0FBQ0lELFFBQUFBLE1BQU0sRUFBRSxtQkFEWjtBQUVJQyxRQUFBQSxXQUFXLEVBQUU7QUFGakIsT0FiRyxFQWlCSDtBQUNJRCxRQUFBQSxNQUFNLEVBQUUsbUJBRFo7QUFFSUMsUUFBQUEsV0FBVyxFQUFFO0FBRmpCLE9BakJHLEVBcUJIO0FBQ0lELFFBQUFBLE1BQU0sRUFBRSxzQkFEWjtBQUVJQyxRQUFBQSxXQUFXLEVBQUU7QUFGakIsT0FyQkcsRUF5Qkg7QUFDSUQsUUFBQUEsTUFBTSxFQUFFLGFBRFo7QUFFSUMsUUFBQUEsV0FBVyxFQUFFO0FBRmpCLE9BekJHLEVBNkJIO0FBQ0lELFFBQUFBLE1BQU0sRUFBRSxtQkFEWjtBQUVJQyxRQUFBQSxXQUFXLEVBQUU7QUFGakIsT0E3QkcsRUFpQ0g7QUFDSUQsUUFBQUEsTUFBTSxFQUFFLG1CQURaO0FBRUlDLFFBQUFBLFdBQVcsRUFBRTtBQUZqQixPQWpDRyxFQXFDSDtBQUNJRCxRQUFBQSxNQUFNLEVBQUUscUJBRFo7QUFFSUMsUUFBQUEsV0FBVyxFQUFFO0FBRmpCLE9BckNHLEVBeUNIO0FBQ0lELFFBQUFBLE1BQU0sRUFBRSxzQkFEWjtBQUVJQyxRQUFBQSxXQUFXLEVBQUU7QUFGakIsT0F6Q0csRUE2Q0g7QUFDSUQsUUFBQUEsTUFBTSxFQUFFLHVCQURaO0FBRUlDLFFBQUFBLFdBQVcsRUFBRTtBQUZqQixPQTdDRyxDQUFQO0FBa0RIOztBQXZGRixHQUZJLENBQVA7QUEyRkgsQ0E1RkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgd2l0aEJ1bmRsZUFuYWx5emVyIGZyb20gJ0BuZXh0L2J1bmRsZS1hbmFseXplcidcblxuaW1wb3J0IHR5cGUgeyBDb25maWd1cmF0aW9uIH0gZnJvbSAnd2VicGFjaydcblxuLy8gPyBOb3QgdXNpbmcgRVM2L1RTIGltcG9ydCBzeW50YXggaGVyZSBiZWNhdXNlIGRldi11dGlscyBoYXMgc3BlY2lhbFxuLy8gPyBjaXJjdW1zdGFuY2VzXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWQsIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXNcbnJlcXVpcmUoJy4vc3JjL2Rldi11dGlscycpLnBvcHVsYXRlRW52KCk7XG5cbmNvbnN0IHBhdGhzID0ge1xuICAgIHVuaXZlcnNlOiBgJHtfX2Rpcm5hbWV9L3NyYy9gLFxuICAgIG11bHRpdmVyc2U6IGAke19fZGlybmFtZX0vbGliL2AsXG4gICAgLy8gdHlwZXMvIGlzIHB1cnBvc2VseSBleGNsdWRlZFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHdpdGhCdW5kbGVBbmFseXplcih7XG4gICAgICAgIGVuYWJsZWQ6IHByb2Nlc3MuZW52LkFOQUxZWkUgPT09ICd0cnVlJ1xuICAgIH0pKHtcbiAgICAgICAgLy8gPyBSZW5hbWVzIHRoZSBidWlsZCBkaXIgXCJidWlsZFwiIGluc3RlYWQgb2YgXCIubmV4dFwiXG4gICAgICAgIGRpc3REaXI6ICdidWlsZCcsXG5cbiAgICAgICAgLy8gPyBXZWJwYWNrIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgLy8gISBOb3RlIHRoYXQgdGhlIHdlYnBhY2sgY29uZmlndXJhdGlvbiBpcyBleGVjdXRlZCB0d2ljZTogb25jZVxuICAgICAgICAvLyAhIHNlcnZlci1zaWRlIGFuZCBvbmNlIGNsaWVudC1zaWRlIVxuICAgICAgICB3ZWJwYWNrOiAoY29uZmlnOiBDb25maWd1cmF0aW9uKSA9PiB7XG4gICAgICAgICAgICAvLyA/IFRoZXNlIGFyZSBhbGlhc2VzIHRoYXQgY2FuIGJlIHVzZWQgZHVyaW5nIEpTIGltcG9ydCBjYWxsc1xuICAgICAgICAgICAgLy8gISBOb3RlIHRoYXQgeW91IG11c3QgYWxzbyBjaGFuZ2UgdGhlc2Ugc2FtZSBhbGlhc2VzIGluIHRzY29uZmlnLmpzb25cbiAgICAgICAgICAgIC8vICEgTm90ZSB0aGF0IHlvdSBtdXN0IGFsc28gY2hhbmdlIHRoZXNlIHNhbWUgYWxpYXNlcyBpbiBwYWNrYWdlLmpzb24gKGplc3QpXG4gICAgICAgICAgICBjb25maWcucmVzb2x2ZSAmJiAoY29uZmlnLnJlc29sdmUuYWxpYXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uY29uZmlnLnJlc29sdmUuYWxpYXMsXG4gICAgICAgICAgICAgICAgdW5pdmVyc2U6IHBhdGhzLnVuaXZlcnNlLFxuICAgICAgICAgICAgICAgIG11bHRpdmVyc2U6IHBhdGhzLm11bHRpdmVyc2UsXG4gICAgICAgICAgICAgICAgLy8gdHlwZXMvIGlzIHB1cnBvc2VseSBleGNsdWRlZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPyBTZWxlY3Qgc29tZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZGVmaW5lZCBpbiAuZW52IHRvIHB1c2ggdG8gdGhlXG4gICAgICAgIC8vID8gY2xpZW50LlxuICAgICAgICAvLyAhISBETyBOT1QgUFVUIEFOWSBTRUNSRVQgRU5WSVJPTk1FTlQgVkFSSUFCTEVTIEhFUkUgISFcbiAgICAgICAgZW52OiB7XG4gICAgICAgICAgICBGTElHSFRTX0dFTkVSQVRFX0RBWVM6IHByb2Nlc3MuZW52LkZMSUdIVFNfR0VORVJBVEVfREFZUyxcbiAgICAgICAgICAgIEFJUlBPUlRfTlVNX09GX0dBVEVfTEVUVEVSUzogcHJvY2Vzcy5lbnYuQUlSUE9SVF9OVU1fT0ZfR0FURV9MRVRURVJTLFxuICAgICAgICAgICAgQUlSUE9SVF9HQVRFX05VTUJFUlNfUEVSX0xFVFRFUjogcHJvY2Vzcy5lbnYuQUlSUE9SVF9HQVRFX05VTUJFUlNfUEVSX0xFVFRFUixcbiAgICAgICAgICAgIFJFU1VMVFNfUEVSX1BBR0U6IHByb2Nlc3MuZW52LlJFU1VMVFNfUEVSX1BBR0UsXG4gICAgICAgICAgICBJR05PUkVfUkFURV9MSU1JVFM6IHByb2Nlc3MuZW52LklHTk9SRV9SQVRFX0xJTUlUUyxcbiAgICAgICAgICAgIExPQ0tPVVRfQUxMX0tFWVM6IHByb2Nlc3MuZW52LkxPQ0tPVVRfQUxMX0tFWVMsXG4gICAgICAgICAgICBESVNBTExPV0VEX01FVEhPRFM6IHByb2Nlc3MuZW52LkRJU0FMTE9XRURfTUVUSE9EUyxcbiAgICAgICAgICAgIFJFUVVFU1RTX1BFUl9DT05UUklWRURfRVJST1I6IHByb2Nlc3MuZW52LlJFUVVFU1RTX1BFUl9DT05UUklWRURfRVJST1IsXG4gICAgICAgICAgICBNQVhfQ09OVEVOVF9MRU5HVEhfQllURVM6IHByb2Nlc3MuZW52Lk1BWF9DT05URU5UX0xFTkdUSF9CWVRFUyxcbiAgICAgICAgfSxcblxuICAgICAgICBhc3luYyByZXdyaXRlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcvdjEvZmxpZ2h0cy9hbGwnLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjEvZmxpZ2h0cy9hbGwnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92MS9mbGlnaHRzL3NlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL2FwaS92MS9mbGlnaHRzL3NlYXJjaCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YxL2ZsaWdodHMvd2l0aC1pZHMnLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjEvZmxpZ2h0cy93aXRoLWlkcydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YxL2luZm8vYWlybGluZXMnLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjEvaW5mby9haXJsaW5lcydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YxL2luZm8vYWlycG9ydHMnLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjEvaW5mby9haXJwb3J0cydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YxL2luZm8vbm8tZmx5LWxpc3QnLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjEvaW5mby9uby1mbHktbGlzdCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YyL2ZsaWdodHMnLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjIvZmxpZ2h0cydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YyL2luZm8vYWlybGluZXMnLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjIvaW5mby9haXJsaW5lcydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YyL2luZm8vYWlycG9ydHMnLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjIvaW5mby9haXJwb3J0cydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YyL2luZm8vYWxsLWV4dHJhcycsXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL2FwaS92Mi9pbmZvL2FsbC1leHRyYXMnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92Mi9pbmZvL25vLWZseS1saXN0JyxcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246ICcvYXBpL3YyL2luZm8vbm8tZmx5LWxpc3QnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92Mi9pbmZvL3NlYXQtY2xhc3NlcycsXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL2FwaS92Mi9pbmZvL3NlYXQtY2xhc3NlcydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbiJdfQ==