"use strict";

var _bundleAnalyzer = _interopRequireDefault(require("@next/bundle-analyzer"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('./src/dev-utils').populateEnv();

const paths = {
  universe: `${__dirname}/src/`,
  multiverse: `${__dirname}/lib/`
};

module.exports = () => {
  return (0, _bundleAnalyzer.default)({
    enabled: process.env.ANALYZE === 'true'
  })({
    distDir: 'build',
    webpack: config => {
      config.resolve && (config.resolve.alias = { ...config.resolve.alias,
        universe: paths.universe,
        multiverse: paths.multiverse
      });
      return config;
    },
    env: {
      FLIGHTS_GENERATE_DAYS: process.env.FLIGHTS_GENERATE_DAYS,
      AIRPORT_NUM_OF_GATE_LETTERS: process.env.AIRPORT_NUM_OF_GATE_LETTERS,
      AIRPORT_GATE_NUMBERS_PER_LETTER: process.env.AIRPORT_GATE_NUMBERS_PER_LETTER,
      RESULTS_PER_PAGE: process.env.RESULTS_PER_PAGE,
      IGNORE_RATE_LIMITS: process.env.IGNORE_RATE_LIMITS,
      LOCKOUT_ALL_KEYS: process.env.LOCKOUT_ALL_KEYS,
      DISALLOWED_METHODS: process.env.DISALLOWED_METHODS,
      REQUESTS_PER_CONTRIVED_ERROR: process.env.REQUESTS_PER_CONTRIVED_ERROR,
      MAX_CONTENT_LENGTH_BYTES: process.env.MAX_CONTENT_LENGTH_BYTES
    },
    experimental: {
      optionalCatchAll: true,

      async rewrites() {
        return [{
          source: '/v1/flights/all',
          destination: '/api/v1/flights/all'
        }, {
          source: '/v1/flights/search',
          destination: '/api/v1/flights/search'
        }, {
          source: '/v1/flights/with-ids',
          destination: '/api/v1/flights/with-ids'
        }, {
          source: '/v1/info/airlines',
          destination: '/api/v1/info/airlines'
        }, {
          source: '/v1/info/airports',
          destination: '/api/v1/info/airports'
        }, {
          source: '/v1/info/no-fly-list',
          destination: '/api/v1/info/no-fly-list'
        }, {
          source: '/v2/flights',
          destination: '/api/v2/flights'
        }, {
          source: '/v2/info/airlines',
          destination: '/api/v2/info/airlines'
        }, {
          source: '/v2/info/airports',
          destination: '/api/v2/info/airports'
        }, {
          source: '/v2/info/all-extras',
          destination: '/api/v2/info/all-extras'
        }, {
          source: '/v2/info/no-fly-list',
          destination: '/api/v2/info/no-fly-list'
        }, {
          source: '/v2/info/seat-classes',
          destination: '/api/v2/info/seat-classes'
        }];
      }

    }
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy9uZXh0LmNvbmZpZy50cyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwicG9wdWxhdGVFbnYiLCJwYXRocyIsInVuaXZlcnNlIiwiX19kaXJuYW1lIiwibXVsdGl2ZXJzZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbmFibGVkIiwicHJvY2VzcyIsImVudiIsIkFOQUxZWkUiLCJkaXN0RGlyIiwid2VicGFjayIsImNvbmZpZyIsInJlc29sdmUiLCJhbGlhcyIsIkZMSUdIVFNfR0VORVJBVEVfREFZUyIsIkFJUlBPUlRfTlVNX09GX0dBVEVfTEVUVEVSUyIsIkFJUlBPUlRfR0FURV9OVU1CRVJTX1BFUl9MRVRURVIiLCJSRVNVTFRTX1BFUl9QQUdFIiwiSUdOT1JFX1JBVEVfTElNSVRTIiwiTE9DS09VVF9BTExfS0VZUyIsIkRJU0FMTE9XRURfTUVUSE9EUyIsIlJFUVVFU1RTX1BFUl9DT05UUklWRURfRVJST1IiLCJNQVhfQ09OVEVOVF9MRU5HVEhfQllURVMiLCJleHBlcmltZW50YWwiLCJvcHRpb25hbENhdGNoQWxsIiwicmV3cml0ZXMiLCJzb3VyY2UiLCJkZXN0aW5hdGlvbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQU9BQSxPQUFPLENBQUMsaUJBQUQsQ0FBUCxDQUEyQkMsV0FBM0I7O0FBRUEsTUFBTUMsS0FBSyxHQUFHO0FBQ1ZDLEVBQUFBLFFBQVEsRUFBRyxHQUFFQyxTQUFVLE9BRGI7QUFFVkMsRUFBQUEsVUFBVSxFQUFHLEdBQUVELFNBQVU7QUFGZixDQUFkOztBQU1BRSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsTUFBTTtBQUNuQixTQUFPLDZCQUFtQjtBQUN0QkMsSUFBQUEsT0FBTyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsT0FBWixLQUF3QjtBQURYLEdBQW5CLEVBRUo7QUFFQ0MsSUFBQUEsT0FBTyxFQUFFLE9BRlY7QUFPQ0MsSUFBQUEsT0FBTyxFQUFHQyxNQUFELElBQTJCO0FBSWhDQSxNQUFBQSxNQUFNLENBQUNDLE9BQVAsS0FBbUJELE1BQU0sQ0FBQ0MsT0FBUCxDQUFlQyxLQUFmLEdBQXVCLEVBQ3RDLEdBQUdGLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlQyxLQURvQjtBQUV0Q2IsUUFBQUEsUUFBUSxFQUFFRCxLQUFLLENBQUNDLFFBRnNCO0FBR3RDRSxRQUFBQSxVQUFVLEVBQUVILEtBQUssQ0FBQ0c7QUFIb0IsT0FBMUM7QUFPQSxhQUFPUyxNQUFQO0FBQ0gsS0FuQkY7QUF3QkNKLElBQUFBLEdBQUcsRUFBRTtBQUNETyxNQUFBQSxxQkFBcUIsRUFBRVIsT0FBTyxDQUFDQyxHQUFSLENBQVlPLHFCQURsQztBQUVEQyxNQUFBQSwyQkFBMkIsRUFBRVQsT0FBTyxDQUFDQyxHQUFSLENBQVlRLDJCQUZ4QztBQUdEQyxNQUFBQSwrQkFBK0IsRUFBRVYsT0FBTyxDQUFDQyxHQUFSLENBQVlTLCtCQUg1QztBQUlEQyxNQUFBQSxnQkFBZ0IsRUFBRVgsT0FBTyxDQUFDQyxHQUFSLENBQVlVLGdCQUo3QjtBQUtEQyxNQUFBQSxrQkFBa0IsRUFBRVosT0FBTyxDQUFDQyxHQUFSLENBQVlXLGtCQUwvQjtBQU1EQyxNQUFBQSxnQkFBZ0IsRUFBRWIsT0FBTyxDQUFDQyxHQUFSLENBQVlZLGdCQU43QjtBQU9EQyxNQUFBQSxrQkFBa0IsRUFBRWQsT0FBTyxDQUFDQyxHQUFSLENBQVlhLGtCQVAvQjtBQVFEQyxNQUFBQSw0QkFBNEIsRUFBRWYsT0FBTyxDQUFDQyxHQUFSLENBQVljLDRCQVJ6QztBQVNEQyxNQUFBQSx3QkFBd0IsRUFBRWhCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZTtBQVRyQyxLQXhCTjtBQXNDQ0MsSUFBQUEsWUFBWSxFQUFFO0FBQ1ZDLE1BQUFBLGdCQUFnQixFQUFFLElBRFI7O0FBRVYsWUFBTUMsUUFBTixHQUFpQjtBQUNiLGVBQU8sQ0FDSDtBQUNJQyxVQUFBQSxNQUFNLEVBQUUsaUJBRFo7QUFFSUMsVUFBQUEsV0FBVyxFQUFFO0FBRmpCLFNBREcsRUFLSDtBQUNJRCxVQUFBQSxNQUFNLEVBQUUsb0JBRFo7QUFFSUMsVUFBQUEsV0FBVyxFQUFFO0FBRmpCLFNBTEcsRUFTSDtBQUNJRCxVQUFBQSxNQUFNLEVBQUUsc0JBRFo7QUFFSUMsVUFBQUEsV0FBVyxFQUFFO0FBRmpCLFNBVEcsRUFhSDtBQUNJRCxVQUFBQSxNQUFNLEVBQUUsbUJBRFo7QUFFSUMsVUFBQUEsV0FBVyxFQUFFO0FBRmpCLFNBYkcsRUFpQkg7QUFDSUQsVUFBQUEsTUFBTSxFQUFFLG1CQURaO0FBRUlDLFVBQUFBLFdBQVcsRUFBRTtBQUZqQixTQWpCRyxFQXFCSDtBQUNJRCxVQUFBQSxNQUFNLEVBQUUsc0JBRFo7QUFFSUMsVUFBQUEsV0FBVyxFQUFFO0FBRmpCLFNBckJHLEVBeUJIO0FBQ0lELFVBQUFBLE1BQU0sRUFBRSxhQURaO0FBRUlDLFVBQUFBLFdBQVcsRUFBRTtBQUZqQixTQXpCRyxFQTZCSDtBQUNJRCxVQUFBQSxNQUFNLEVBQUUsbUJBRFo7QUFFSUMsVUFBQUEsV0FBVyxFQUFFO0FBRmpCLFNBN0JHLEVBaUNIO0FBQ0lELFVBQUFBLE1BQU0sRUFBRSxtQkFEWjtBQUVJQyxVQUFBQSxXQUFXLEVBQUU7QUFGakIsU0FqQ0csRUFxQ0g7QUFDSUQsVUFBQUEsTUFBTSxFQUFFLHFCQURaO0FBRUlDLFVBQUFBLFdBQVcsRUFBRTtBQUZqQixTQXJDRyxFQXlDSDtBQUNJRCxVQUFBQSxNQUFNLEVBQUUsc0JBRFo7QUFFSUMsVUFBQUEsV0FBVyxFQUFFO0FBRmpCLFNBekNHLEVBNkNIO0FBQ0lELFVBQUFBLE1BQU0sRUFBRSx1QkFEWjtBQUVJQyxVQUFBQSxXQUFXLEVBQUU7QUFGakIsU0E3Q0csQ0FBUDtBQWtESDs7QUFyRFM7QUF0Q2YsR0FGSSxDQUFQO0FBZ0dILENBakdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHdpdGhCdW5kbGVBbmFseXplciBmcm9tICdAbmV4dC9idW5kbGUtYW5hbHl6ZXInXG5cbmltcG9ydCB0eXBlIHsgQ29uZmlndXJhdGlvbiB9IGZyb20gJ3dlYnBhY2snXG5cbi8vID8gTm90IHVzaW5nIEVTNi9UUyBpbXBvcnQgc3ludGF4IGhlcmUgYmVjYXVzZSBkZXYtdXRpbHMgaGFzIHNwZWNpYWxcbi8vID8gY2lyY3Vtc3RhbmNlc1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnJlc29sdmVkLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzXG5yZXF1aXJlKCcuL3NyYy9kZXYtdXRpbHMnKS5wb3B1bGF0ZUVudigpO1xuXG5jb25zdCBwYXRocyA9IHtcbiAgICB1bml2ZXJzZTogYCR7X19kaXJuYW1lfS9zcmMvYCxcbiAgICBtdWx0aXZlcnNlOiBgJHtfX2Rpcm5hbWV9L2xpYi9gLFxuICAgIC8vIHR5cGVzLyBpcyBwdXJwb3NlbHkgZXhjbHVkZWRcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xuICAgIHJldHVybiB3aXRoQnVuZGxlQW5hbHl6ZXIoe1xuICAgICAgICBlbmFibGVkOiBwcm9jZXNzLmVudi5BTkFMWVpFID09PSAndHJ1ZSdcbiAgICB9KSh7XG4gICAgICAgIC8vID8gUmVuYW1lcyB0aGUgYnVpbGQgZGlyIFwiYnVpbGRcIiBpbnN0ZWFkIG9mIFwiLm5leHRcIlxuICAgICAgICBkaXN0RGlyOiAnYnVpbGQnLFxuXG4gICAgICAgIC8vID8gV2VicGFjayBjb25maWd1cmF0aW9uXG4gICAgICAgIC8vICEgTm90ZSB0aGF0IHRoZSB3ZWJwYWNrIGNvbmZpZ3VyYXRpb24gaXMgZXhlY3V0ZWQgdHdpY2U6IG9uY2VcbiAgICAgICAgLy8gISBzZXJ2ZXItc2lkZSBhbmQgb25jZSBjbGllbnQtc2lkZSFcbiAgICAgICAgd2VicGFjazogKGNvbmZpZzogQ29uZmlndXJhdGlvbikgPT4ge1xuICAgICAgICAgICAgLy8gPyBUaGVzZSBhcmUgYWxpYXNlcyB0aGF0IGNhbiBiZSB1c2VkIGR1cmluZyBKUyBpbXBvcnQgY2FsbHNcbiAgICAgICAgICAgIC8vICEgTm90ZSB0aGF0IHlvdSBtdXN0IGFsc28gY2hhbmdlIHRoZXNlIHNhbWUgYWxpYXNlcyBpbiB0c2NvbmZpZy5qc29uXG4gICAgICAgICAgICAvLyAhIE5vdGUgdGhhdCB5b3UgbXVzdCBhbHNvIGNoYW5nZSB0aGVzZSBzYW1lIGFsaWFzZXMgaW4gcGFja2FnZS5qc29uIChqZXN0KVxuICAgICAgICAgICAgY29uZmlnLnJlc29sdmUgJiYgKGNvbmZpZy5yZXNvbHZlLmFsaWFzID0ge1xuICAgICAgICAgICAgICAgIC4uLmNvbmZpZy5yZXNvbHZlLmFsaWFzLFxuICAgICAgICAgICAgICAgIHVuaXZlcnNlOiBwYXRocy51bml2ZXJzZSxcbiAgICAgICAgICAgICAgICBtdWx0aXZlcnNlOiBwYXRocy5tdWx0aXZlcnNlLFxuICAgICAgICAgICAgICAgIC8vIHR5cGVzLyBpcyBwdXJwb3NlbHkgZXhjbHVkZWRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vID8gU2VsZWN0IHNvbWUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGRlZmluZWQgaW4gLmVudiB0byBwdXNoIHRvIHRoZVxuICAgICAgICAvLyA/IGNsaWVudC5cbiAgICAgICAgLy8gISEgRE8gTk9UIFBVVCBBTlkgU0VDUkVUIEVOVklST05NRU5UIFZBUklBQkxFUyBIRVJFICEhXG4gICAgICAgIGVudjoge1xuICAgICAgICAgICAgRkxJR0hUU19HRU5FUkFURV9EQVlTOiBwcm9jZXNzLmVudi5GTElHSFRTX0dFTkVSQVRFX0RBWVMsXG4gICAgICAgICAgICBBSVJQT1JUX05VTV9PRl9HQVRFX0xFVFRFUlM6IHByb2Nlc3MuZW52LkFJUlBPUlRfTlVNX09GX0dBVEVfTEVUVEVSUyxcbiAgICAgICAgICAgIEFJUlBPUlRfR0FURV9OVU1CRVJTX1BFUl9MRVRURVI6IHByb2Nlc3MuZW52LkFJUlBPUlRfR0FURV9OVU1CRVJTX1BFUl9MRVRURVIsXG4gICAgICAgICAgICBSRVNVTFRTX1BFUl9QQUdFOiBwcm9jZXNzLmVudi5SRVNVTFRTX1BFUl9QQUdFLFxuICAgICAgICAgICAgSUdOT1JFX1JBVEVfTElNSVRTOiBwcm9jZXNzLmVudi5JR05PUkVfUkFURV9MSU1JVFMsXG4gICAgICAgICAgICBMT0NLT1VUX0FMTF9LRVlTOiBwcm9jZXNzLmVudi5MT0NLT1VUX0FMTF9LRVlTLFxuICAgICAgICAgICAgRElTQUxMT1dFRF9NRVRIT0RTOiBwcm9jZXNzLmVudi5ESVNBTExPV0VEX01FVEhPRFMsXG4gICAgICAgICAgICBSRVFVRVNUU19QRVJfQ09OVFJJVkVEX0VSUk9SOiBwcm9jZXNzLmVudi5SRVFVRVNUU19QRVJfQ09OVFJJVkVEX0VSUk9SLFxuICAgICAgICAgICAgTUFYX0NPTlRFTlRfTEVOR1RIX0JZVEVTOiBwcm9jZXNzLmVudi5NQVhfQ09OVEVOVF9MRU5HVEhfQllURVMsXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gVE9ETzogbW92ZSB0aGVzZSBvdXQgb2YgZXhwZXJpbWVudGFsIHdoZW4gdGhleSdyZSBub3QgZXhwZXJpbWVudGFsXG4gICAgICAgIC8vIFRPRE86IGFueW1vcmUhXG4gICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgb3B0aW9uYWxDYXRjaEFsbDogdHJ1ZSxcbiAgICAgICAgICAgIGFzeW5jIHJld3JpdGVzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92MS9mbGlnaHRzL2FsbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjEvZmxpZ2h0cy9hbGwnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92MS9mbGlnaHRzL3NlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjEvZmxpZ2h0cy9zZWFyY2gnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92MS9mbGlnaHRzL3dpdGgtaWRzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL2FwaS92MS9mbGlnaHRzL3dpdGgtaWRzJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcvdjEvaW5mby9haXJsaW5lcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjEvaW5mby9haXJsaW5lcydcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YxL2luZm8vYWlycG9ydHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246ICcvYXBpL3YxL2luZm8vYWlycG9ydHMnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92MS9pbmZvL25vLWZseS1saXN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL2FwaS92MS9pbmZvL25vLWZseS1saXN0J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcvdjIvZmxpZ2h0cycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogJy9hcGkvdjIvZmxpZ2h0cydcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnL3YyL2luZm8vYWlybGluZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246ICcvYXBpL3YyL2luZm8vYWlybGluZXMnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92Mi9pbmZvL2FpcnBvcnRzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL2FwaS92Mi9pbmZvL2FpcnBvcnRzJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcvdjIvaW5mby9hbGwtZXh0cmFzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL2FwaS92Mi9pbmZvL2FsbC1leHRyYXMnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJy92Mi9pbmZvL25vLWZseS1saXN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL2FwaS92Mi9pbmZvL25vLWZseS1saXN0J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcvdjIvaW5mby9zZWF0LWNsYXNzZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246ICcvYXBpL3YyL2luZm8vc2VhdC1jbGFzc2VzJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4iXX0=